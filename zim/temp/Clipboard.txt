Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2017-03-08T11:22:39-05:00

====== Clipboard ======
Created Wednesday 08 March 2017

	static final boolean browser_debug = System.getenv("SWT_DEBUG") != null ? true : false;
	static final boolean print_testName = System.getenv("SWT_TESTNAME") != null ? true : false;

	final AtomicBoolean passed = new AtomicBoolean(false);
	final Instant timeOut = Instant.now().plusSeconds(loopMultipier * secondsToWaitTillFail);

	new Thread(() -> {
		while (Instant.now().isBefore(timeOut)) {
			if (passTest.get()) {
				passed.set(true);
			}
		}
	}).start();


void runLoopTimer(final int milliseconds) {
	final Display display = shell.getDisplay();

	// New thread that forces display to wake up after timeout.
	new Thread(() -> {
		try { Thread.sleep(milliseconds);} catch (InterruptedException e) {e.printStackTrace();}
		if (!display.isDisposed())
			display.wake();
	}).start();

	// Standard event loop, except it stop repeating after timeout.
	Instant timeOut = Instant.now().plusMillis(milliseconds);
	while (Instant.now().isBefore(timeOut)) {
		if (!shell.isDisposed()) {
			if (!display.readAndDispatch()) {
				display.sleep();
			}
		}
	}
}
