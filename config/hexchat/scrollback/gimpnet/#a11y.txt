T 1486400925 19*	Now talking on 22#a11y
T 1486479045 19*	Now talking on 22#a11y
T 1486481067 18<b4n18>	joanie: You should have received some logs by mail, but tell me if you need anything more
T 1486481080 18<joanie18>	b4n: ok thanks
T 1486481081 18<b4n18>	or if you prefer me to attach them to the report
T 1486481094 18<joanie18>	i prefer to be done with this mess ;)
T 1486481102 18<joanie18>	so if I have them in email, great
T 1486481125 18<b4n18>	:)
T 1486481148 18<b4n18>	MATE1.16/GTK3 is almost there I think
T 1486481159 18<b4n18>	1.8/GTK2 not so much I'm afraid
T 1486481179 18<b4n18>	not sure what's so diffrenet between thos 2 setups, the mate-panel itself shouldn't have changed too much
T 1486481208 18<joanie18>	At some point I think it's time to give up. How old is 1.8?
T 1486481213 18<joanie18>	years?
T 1486481255 18<b4n18>	2-3 years apparently
T 1486481267 18<b4n18>	last point release is from 2015-03-13
T 1486481276 18<b4n18>	first release from 2014-03-04
T 1486481601 18<joanie18>	b4n: point of clarification: Did you send the Gtk3 debug logs for comparison, or are those chatty too?
T 1486481645 18<b4n18>	the GTK3 ones are not as chatty at all, but they contain the extra announcmenet after the menu I mentioned
T 1486481659 18<joanie18>	aha ok thanks
T 1486481671 18<b4n18>	the 2 GTK3 ones are very similar though
T 1486481835 18<joanie18>	you're getting name-changed events that I'm not
T 1486481939 18<b4n18>	oh?  FWIW I'm in French locale here, but I doubt it should matter
T 1486481961 18<joanie18>	agreed re not mattering (in theory)
T 1486481987 18<joanie18>	I wonder if it's due to a panel applet
T 1486482001 18<b4n18>	oh
T 1486482003 18<joanie18>	anyhoo, we cannot just ignore name-changes
T 1486482012 18<b4n18>	I have the clock with seconds
T 1486482014 18<joanie18>	so lemme see if I can come up with something
T 1486482017 18<b4n18>	lemme see chat hapens if I disable it
T 1486482065 18<b4n18>	nah it's not the clock
T 1486482115 18<joanie18>	while I look for a hack, mind verifying that an english session doesn't change the situation for you?
T 1486482128 18<b4n18>	I was on it
T 1486482133 18<b4n18>	and apparently it does somehow
T 1486482139 18<joanie18>	heh
T 1486482144 18<joanie18>	ok, lemme switch to french
T 1486482195 18<b4n18>	yeah definitely I don't get the announce after
T 1486482225 18<joanie18>	you changing the whole session or just relaunching mate-panel with a new locale?
T 1486482239 18<b4n18>	though, I still get context announcement (panel frame/panel panel before applications menu) a bit randomly
T 1486482252 18<b4n18>	joanie: I just relaunched the panel with LANGUAGE=C
T 1486482257 18<joanie18>	ok
T 1486482338 18<b4n18>	(FWIW, the GTK2 tests are all done in an English session)
T 1486482353 18<joanie18>	I can confirm the french problem
T 1486482356 18<joanie18>	weird
T 1486482395 18<b4n18>	does the name actually change?
T 1486482473 18<joanie18>	it doesn't look like it changes, and that's what I plan to hack around once I verify that's the case
T 1486482489 18<joanie18>	but it would be nice if the bogus events were not emitted
T 1486482504 18<joanie18>	perhaps that is something you can investigate on your end?
T 1486482512 18<joanie18>	and fix wherever the bug is?
T 1486482514 18<b4n18>	yeah
T 1486482519 18<joanie18>	thanks!
T 1486482520 18<b4n18>	if it's not in GTK :D
T 1486482543 18<joanie18>	if it is in Gtk, you'd be fixing even more
T 1486482564 18<joanie18>	and there are some conditions it's hard to hack around
T 1486482566 18<b4n18>	yeah, but I'd have to battle a lot more to get it committed ^^
T 1486482574 18<b4n18>	yeah
T 1486482581 18<b4n18>	I'll investigate
T 1486482588 18<joanie18>	thanks again :)
T 1486482690 18<b4n18>	np, thanks for those fixes already :)
T 1486482819 18<b4n18>	ok I think I got it
T 1486482831 18<b4n18>	(in the code)
T 1486483037 18<b4n18>	yep
T 1486483049 18<b4n18>	absurd bug in mate-panel
T 1486483528 18<joanie18>	b4n: you found the name-change bug?
T 1486483533 18<b4n18>	yes
T 1486483547 18<joanie18>	if you can fix it in mate-panel, then I'd prefer that be the solution
T 1486483578 18<b4n18>	joanie: https://github.com/mate-desktop/mate-panel/pull/525
T 1486483586 18<b4n18>	yes it's totally a mate-panel bug
T 1486483629 18<joanie18>	you rock
T 1486483645 18<joanie18>	lemme see if I can see what your logs reveal about gtk+ 2
T 1486483653 18<b4n18>	:)
T 1486484822 18<joanie18>	b4n: could you see if the problem also exists when you use LibreOffice with the old mate-panel?
T 1486484830 18<joanie18>	in English locale
T 1486484840 18<joanie18>	sorry, the problem being the gtk+ 2 stuff
T 1486484844 18<joanie18>	not the language stuff
T 1486484867 18<b4n18>	you want me to try and hit Alt+F1 from inside LO under MATE1.8/GTK2 ?
T 1486484873 18<joanie18>	yes please
T 1486484876 18<b4n18>	sure
T 1486484886 18<joanie18>	thanks for saying what I mean more clearly than I can
T 1486484888 18<joanie18>	;)
T 1486484891 18<joanie18>	more coffee please
T 1486485013 18<b4n18>	joanie: same issue about re-announcing the app
T 1486485020 18<joanie18>	ok thanks
T 1486485024 18<b4n18>	I can send you the log if you want
T 1486485044 18<joanie18>	not yet
T 1486485069 18<b4n18>	(BTW for some reason I don't see the accessible-name issue there event though the code is clearly broken the sameâ€¦ I won't complain though)
T 1486485314 18<joanie18>	b4n: if you run gtk3-demo in the old MATE environment, do you also see the problem?
T 1486485339 18<b4n18>	lemme see
T 1486485592 18<b4n18>	joanie: yes.  and I got 2 times where it cutoff the menu speech Firefox-like (before your fix)
T 1486485613 18<joanie18>	so this seems to be a bug in the old MATE panel
T 1486485634 18<joanie18>	The firefox issue was something I saw
T 1486485677 18<b4n18>	well, the fact the window is announced probably comes from the X grabs/ungrabs that happens when hitting Alt+F1
T 1486485691 18<b4n18>	why the menu doesn't take over though I don't know
T 1486485719 18<joanie18>	but I don't see sanity checking window events across the board in Orca master in order to work around a bug in an old version of mate-panel
T 1486485747 18<b4n18>	we don't have thos events in the GTK3 version?
T 1486485770 18<b4n18>	but if you give me a moment, I can try mate-panel 1.16 GTK2 on the old thing
T 1486485783 18<joanie18>	ok
T 1486486293 18<b4n18>	1.16/GTK2 doesn't help
T 1486486319 18*	joanie sighs
T 1486486332 18<joanie18>	and the problem is fixed for firefox?
T 1486486357 18<b4n18>	yes
T 1486486382 18<joanie18>	and why can't the Gtk+ issue be fixed in Gtk+ ?
T 1486486403 18<b4n18>	wait.
T 1486486406 18<joanie18>	because it still means sanity checking events across the board
T 1486486430 18<joanie18>	just in case people are using MATE with Gtk+ 2
T 1486486445 18<joanie18>	when a lot of users aren't using mate and if they are have hopefully switched to Gtk+ 3
T 1486486489 18<b4n18>	joanie: it *might* be possibel to somehow filter those events from the a11y part, but it might miss some legitmiate onew then IIUC
T 1486486521 18<joanie18>	b4n: making the change / doing the filtering where?
T 1486486530 18<b4n18>	yes
T 1486486542 18<joanie18>	yes what?
T 1486486559 18<b4n18>	that filtering on GTK side might cause problesm too
T 1486486585 18<joanie18>	so in Gtk+ 2, correct?
T 1486486591 18<b4n18>	those extra events are emitted during an X grab, and if the active window changes during it, it would get ignored
T 1486486605 18<b4n18>	joanie: AFAIK there's the very same issue in GTK3
T 1486486637 18<joanie18>	but are you seeing this problem with mate-panel Gtk+ 3?
T 1486486640 18<joanie18>	I'm not
T 1486486650 18<b4n18>	no I'm not
T 1486486664 18<joanie18>	so is the very same issue in Gtk+ 3?
T 1486486682 18<b4n18>	I meant the extra events
T 1486486688 18<b4n18>	but lemme check again
T 1486486697 18<joanie18>	Then why are we not seeing the chattiness?
T 1486486706 18<joanie18>	Firefox emits extra events
T 1486486712 18<joanie18>	but check some other app
T 1486486874 18<b4n18>	joanie: I don't know why it works on my GTK3 box
T 1486486899 18<joanie18>	you mean no chattiness in Gtk+3 mate-panel?
T 1486486907 18<b4n18>	but logging the events I deveinitely see what I described there https://bugzilla.gnome.org/show_bug.cgi?id=776854
T 1486486934 18<b4n18>	joanie: no, not there yet: no chattiness under a proper MATE 1.16 GTK3
T 1486486979 18<b4n18>	the same setup as I had all along, the one where the language change fixed it further
T 1486487054 18<joanie18>	So if I'm understanding you correctly, you're asking me to attempt to sanity check window-activation related events coming from all apps and toolkits for all users
T 1486487076 18<joanie18>	in order to address a problem which only occurs if the user is using MATE panel built with Gtk+ 2
T 1486487079 18<joanie18>	?
T 1486487083 18<b4n18>	â€¦or anythin else that would shut this up
T 1486487110 18<joanie18>	I would suggest you fix that downstream
T 1486487123 18<b4n18>	actually I don't understand why Orca isn't stopping the speach from the activate/deactivate events although another app is focused
T 1486487142 18<b4n18>	(the panel)
T 1486487194 18<joanie18>	probably because we don't normally see bogus events like that?
T 1486487205 18<b4n18>	maybe
T 1486487208 18<joanie18>	;)
T 1486487224 18<b4n18>	but isn't the fact it doesn't happen on our GTK3 setups just that Orca shuts it up?
T 1486487230 18<b4n18>	I shuold probably check teh event log though
T 1486487255 18<joanie18>	Orca isn't doing anything special for mate-panel
T 1486487263 18<b4n18>	no
T 1486487264 18<joanie18>	regardless of version or gtk+ version
T 1486487286 18<b4n18>	but in normal situation, if the currently focused app, it shuts the previous on up, right?
T 1486487303 18<b4n18>	if the currently focused app changes*
T 1486487310 18<b4n18>	one*
T 1486487357 18<joanie18>	I'm not sure I follow what you're saying
T 1486487358 18<joanie18>	however
T 1486487470 18<b4n18>	shouldnt the fact that the panel gets focused shut up the other app (e.g. the terminal)?
T 1486487484 18<b4n18>	I'm literally hearing the whole announce of the current app
T 1486487493 18<b4n18>	it's not cut off or anything
T 1486487494 18<joanie18>	because of the window:activate event
T 1486487501 18<joanie18>	?
T 1486487502 18<b4n18>	and then, after all that, I get the announce of the menu
T 1486487548 18<b4n18>	my point is, shouldn't one of those be cut off by the other becoming the ative one?
T 1486487573 18<joanie18>	probably
T 1486487629 18<joanie18>	but Orca deliberately doesn't interrupt speech if a window was recently activated
T 1486487639 18<joanie18>	because then it won't present the new window
T 1486487661 18<b4n18>	oh
T 1486487765 18<b4n18>	joanie: well I don't know, but in my GTK3 logs I see the very same window deactivate/activate events
T 1486487774 18<b4n18>	yet it's not a problem apparently
T 1486487807 18<joanie18>	is the behavior with mate-panel built with Gtk+ 3 fixed?
T 1486487816 18<b4n18>	1s
T 1486487839 18<joanie18>	?
T 1486487911 18<b4n18>	gimme a moment
T 1486487915 18<joanie18>	k
T 1486487929 18<b4n18>	building a GTK3 one is a lot more annoying on a GTK2 environment than a GTK2 one :)
T 1486487936 18<joanie18>	ha
T 1486488434 18<b4n18>	joanie: mate-panel 1.16/GTK3 doen't magically fix it
T 1486488470 18<b4n18>	it feels like it happens slightly less often, but it's highly random
T 1486488471 18<joanie18>	so before you were not seeing the problem and now you are?
T 1486488494 18<joanie18>	because before my changes I was seeing the problem and now I am not
T 1486488502 18<joanie18>	using Fedora 25
T 1486488540 18<b4n18>	no no I'm talking about putting a MATE 1.16 GTK3 panel on Debian Jessie, which has otherwise MATE 1.8
T 1486488564 18<b4n18>	behavior on my Debian Sid box is still good
T 1486488605 18<joanie18>	so what's up with Debian Jessie then?
T 1486488632 18<joanie18>	and why is it my job to fix it in Orca?
T 1486488640 18<joanie18>	s/fix/"fix"/
T 1486488682 18<b4n18>	when I hit Alt+F1 on that Debian Jessie (with orca master obviously), it often announces the current window before announcing the menu
T 1486488759 18<joanie18>	what I meant with "what's up with Debian Jessie then?" is what condition is present in Debian Jessie that might be responsible for it not working there?
T 1486488774 18<b4n18>	whether it's your job or not I don't know, and don't mean to force it upon you.  But I don't think the events are tremendously different from the ones I get on my Sid box where it does work
T 1486488808 18<b4n18>	joanie: ah.  I have no clue what's so different.  It has GTK2 everything, maybe that's the main difference
T 1486488857 18<joanie18>	and you have the latest ATK? Or at least a newer one?
T 1486488872 18<joanie18>	I think that some event filtering was done in ATK a year or two ago
T 1486488889 18<joanie18>	and there have been various and sundry fixes in AT-SPI2
T 1486488937 18<b4n18>	I probably have olde ones.  ATK 2.14
T 1486488937 18<joanie18>	and even if I did sanity check everything for Debian Jessie, if that's stable Debian, they won't be including the current Orca, right?
T 1486488950 18<joanie18>	yikes
T 1486488975 18<b4n18>	no indeed they won't.  If it's really specific to Jessie you probably don't really care yourself
T 1486488989 18<joanie18>	If things are good for a recent environment (which it sounds like they are(??)) then I think I've done enough within Orca to address this
T 1486489023 18<joanie18>	which means that the bug you filed is as fixed as it is going to be
T 1486489040 18<b4n18>	but as I see the very same events on both setups, I somewhat wonder it's really the environment's fault, or a different code path in Orca because of it
T 1486489045 18<b4n18>	okay yeah I get that
T 1486489064 18<b4n18>	I can probably live with a hack in Jessie in the meantime
T 1486489087 18<joanie18>	would you like to close the bug and obsolete the patches you proposed or shall I?
T 1486489135 18<b4n18>	if you don't mind I'd like to ask colleagues to test and see if there's something left I missed
T 1486489144 18<b4n18>	and then I can close it, sure
T 1486489147 18<joanie18>	ok
T 1486489162 18<joanie18>	I'm afraid I won't be taking the patches you proposed, however
T 1486489171 18<joanie18>	as I don't believe they are the right and safe thing to do
T 1486489215 18<joanie18>	if you missed something in a modern environment, give me the specifics to reproduce the problem and I'll see what I can do
T 1486489233 18<b4n18>	sure
T 1486489234 18<b4n18>	thanks
T 1486489263 18<joanie18>	np
T 1486489549 18<b4n18>	joanie: ah, one last detail: I don't always get the "top expandd edg panel frame/panel" before "applications menu"
T 1486489566 18<b4n18>	seems to mostly depend on which app was focused before
T 1486489611 18<b4n18>	from Firefox I always get it
T 1486489618 18<b4n18>	from mate-terminal almost (?) never
T 1486489874 18<joanie18>	b4n: ok, I'll take a look
T 1486497760 18<joanie18>	b4n: I made some more changes -- including sanity checking all windows upon activation. I hope that solves more of your problems
T 1486497771 18<joanie18>	I also officially loathe mate-panel now.
T 1486497774 18*	joanie runs to meeting
T 1486500426 18<TheMuso18>	Hrm. I've been fixing things in caja recently, maybe its time I get familiar with Mate panel's code...
T 1486507720 18<joanie18>	TheMuso: That would be nice
T 1486508586 18<TheMuso18>	joanie: All depends on how much code has to do with legacy systray stuff.
T 1486508788 18<TheMuso18>	Anyways, need to get more familiar with the problem first.
T 1486534307 18<TheMuso18>	joanie: Is there a bug I can look at to better learn what the problems with mate panel are?
T 1486537707 18<joanie18>	TheMuso: The biggest issue seems to be related to event ordering. The menu selection happens first; then we get the window:activate events. Beyond that something(tm) mate-panel does is convincing Firefox to emit window:activate and state-changed:active and state-changed:focused events that are bogus.
T 1486537746 18<joanie18>	TheMuso: b4n claims this cannot be fixed in mate-panel and that it's a gtk+ issue.
T 1486537800 18<joanie18>	But I am hoping you can find a way to get the event ordering reversed so that the window first becomes active (or at least announces that) and then emits the selection-change event.
T 1486537826 18<joanie18>	the amount of sanity checking I am doing seems unfortunate
T 1486537852 18<joanie18>	"thank mate-panel, kids"
T 1486537937 18<joanie18>	also I think there may be some race condition or two going on
T 1486537966 18<joanie18>	because I don't always get the same events
T 1486537989 18<joanie18>	but the window activation following the menu selection seems pretty reliable
T 1486539174 18<TheMuso18>	Ok, thanks for the summary. I'll see what I can find.
T 1486539186 18<joanie18>	you rock. thanks!!
T 1486542873 18<b4n18>	TheMuso: my take is that it't not really mate-panel's fault but X focus out/in/out events upon keyboard grabs combined with a window (the panels) that don't get focused
T 1486542894 18<b4n18>	but heck, maybe I'm wrong, let's hope so :)
T 1486543083 18<TheMuso18>	Well, according to what I am seeing in accerciser, I get bounds changed signals for menus in the applications menu first, before any window activation event. If I'm understanding joanie correct, the window activate event should always be the first event from a newly focused window...
T 1486543111 18<TheMuso18>	Ad state-changed::showing events too.
T 1486543114 18<TheMuso18>	before window activate
T 1486543142 18<joanie18>	The state-changed:selected one is the key, however
T 1486543201 18<joanie18>	b4n: have you had time to test the latest master
T 1486543220 18<joanie18>	as indicated I added more sad hacks and updated existing sad hacks
T 1486543228 18<b4n18>	TheMuso: the panel's frame never gets actually activated as a window.  that's the WM choice, and it's useful not to get focus on the manel after triggering that, but having it back in the poriginal window
T 1486543234 18<joanie18>	and even did a global sanity check just for mate-panel
T 1486543240 18*	joanie grumbles some more
T 1486543253 18<b4n18>	joanie: on Debian Sid/GTK3 the announcement seems consistent, good :)
T 1486543263 18<joanie18>	And I'd like to be able to cross this one off my list
T 1486543269 18<joanie18>	yay for good! :)
T 1486543273 18<TheMuso18>	Yup can confirm with accerciser, Fedora 25, mate 1.16.
T 1486543303 18<joanie18>	TheMuso: if you can fix it, you will become my hero
T 1486543321 18<TheMuso18>	joanie: I'll see what I can do. No promises. :)
T 1486543332 18<joanie18>	thanks! :)
T 1486543379 18<b4n18>	joanie: no luck on 1.8/GTK2, but IIUC you don't care too much about that
T 1486543413 18<joanie18>	I'm having a really hard time caring, sorry.
T 1486543423 18<TheMuso18>	Accessibility in GTK2 is quite a different beast to GTK3.
T 1486543425 18<joanie18>	Especially given it may be something already filtered out in changes in ATK
T 1486543433 18<joanie18>	or AT-SPI2
T 1486543486 18<joanie18>	and it's Gtk+ 2 ffs ;)
T 1486543510 18<b4n18>	TheMuso: is it from an external POV?  the implementation seemed fairly similar between GAIL's *Accessible and the Gtk*Accesssible
T 1486543537 18<joanie18>	anyway b4n if it's decent enough, could you please comment on that bug and close it?
T 1486543572 18<b4n18>	joanie: yes.  I'll prepare a setup so colleagues can test today and I'll do that
T 1486543580 18<joanie18>	thanks!
T 1486543596 18<TheMuso18>	b4n: In GTK+2, accessibility is implemented in a separate module. In GTK+3, its part of the core GTK 3 library, so it is possible for any custom accessible code to directly inherrit from GTK's own accessibility objects.
T 1486543614 18<b4n18>	TheMuso: yeah I got that part :)
T 1486543634 18<b4n18>	though in GTK2 it was somewhat possible too due to the ATK registry but well
T 1486543650 18<joanie18>	there were also a bunch of fixes for a11y issues that went into gtk+3 that are not in gtk+2
T 1486543674 18<TheMuso18>	Yeah, I know, but I don't know how well that worked, and I am not sure I care really, because the way things are done in GTK+3 is cleaner.
T 1486543697 18<b4n18>	yeah, post 3.6 it's better
T 1486543700 18*	joanie would like gtk+2 to die
T 1486543718 18<b4n18>	between 3.2 and 3.6, err.  world blinked for a year
T 1486543718 18*	joanie hopes it suffers too
T 1486543785 18<TheMuso18>	joanie: From a code implementation POV a11y wise, yeah GTK 2 can die as far as I'm concerned too.
T 1486543799 18<joanie18>	:)
T 1486543964 18<TheMuso18>	Ok not sure if this was tried, but I get the same behavior when opening a menu with the mouse as well.
T 1486543984 18<TheMuso18>	So I don't think it has anything to do with the keyboard grab code, but of course that makes sense really.
T 1486560407 18<joanie18>	TheMuso and or b4n: Take a look at the mate-panel applets using accerciser.
T 1486560427 18<joanie18>	there is nothing connecting applets to the panel
T 1486560438 18<joanie18>	no parent-child relationship
T 1486560459 18<joanie18>	no alternate accessible relation type
T 1486560472 18<joanie18>	applets are their own applications and lack children
T 1486560482 18<joanie18>	like the entry of the dictionary applet
T 1486560510 18<joanie18>	those absent children emit events, mind you
T 1486560538 18<joanie18>	you just cannot locate them from the top down (i.e. in Accerciser's tree of accessibles)
T 1486560586 18<joanie18>	b4n: addressing those sorts of issues should be done in mate-panel and/or its applets and NOT through sad Orca hacks that make me cry ;)
T 1486560633 18<joanie18>	so if you have spare time to try to make mate-panel suck less, focusing on the non-Orca side of a fix or hack would be the way to go
T 1486563066 18<b4n18>	joanie: yes, applets should likely be tied with the panel through AtkSocket/AtkPlug
T 1486563091 18<b4n18>	or mate-panel should stop having those as separate apps as their current sutff only works under X anyway
T 1486563185 18*	joanie nods
T 1486563223 18<joanie18>	if you work on a solution that doesn't JustWork(tm) with Orca, lemme know.
T 1486563291 18<b4n18>	okay
T 1486563337 18<b4n18>	not sure I'll have time for that one "soon" as it seems not trivial, but I'll keep it in mind if no one else beats me to it (:wink: to anyone interested)
T 1486585502 18<TheMuso18>	b4n: Yeah, as much as having them as separate executables may bring some protectino to the panel, maybe it needs to be a plugin interface using libpeas, which can still allow people to write applets in python/any GObject introspection compatible language.
T 1486585516 18<TheMuso18>	Which should work going forward in the wayland world.
T 1486629441 18<b4n18>	TheMuso: IIUC that's already working, and they support in-process applets too, just that they prefer the external ones.  but yeah they probably need changing something if they don't wanna get stuck to X forever
T 1486673655 19*	Now talking on 22#a11y
T 1486740583 20*	Disconnected (20Connection timed out)
T 1486740597 19*	Now talking on 22#a11y
T 1486994903 19*	Now talking on 22#a11y
T 1487002481 20*	Disconnected (20Connection timed out)
T 1487002495 19*	Now talking on 22#a11y
T 1487020946 20*	Disconnected (20Connection timed out)
T 1487020959 19*	Now talking on 22#a11y
T 1487063954 18<Fudge18>	joanie:  are you on Facebook for work
T 1487063972 18<joanie18>	Fudge: me personally? No.
T 1487063978 18<joanie18>	Igalia has a presence.
T 1487063980 18<joanie18>	Why?
T 1487063996 18<Fudge18>	I have a work profile and wanted to connect with you if so, all good
T 1487064045 18<Fudge18>	I follow you on Twitter
T 1487064049 18<Fudge18>	not that I use it much
T 1487064056 18<Fudge18>	 i'm often amused
T 1487064064 18<Fudge18>	like your humour 
T 1487064075 18<joanie18>	:)
T 1487138710 18<Fudge18>	4[1454:14054 pm] up 8wks 3hrs 18mins, load 63%
T 1487169311 18<b4n18>	joanie: about my Thunderbird table: now I have proper Table accessible (had to change a bunch of things, that stuff is bizarre, but whatever), but still no speech with master
T 1487169329 18<b4n18>	braille is fine, I see in the debug log it finds the column and row headers
T 1487169361 18<joanie18>	b4n: I cannot look now. I can take a look later.
T 1487169367 18<joanie18>	You have a patch or try build?
T 1487169374 18<joanie18>	patch for the tbird table I mean
T 1487169409 18<b4n18>	not published yet, but I will
T 1487169420 18<joanie18>	when you have that, please email me.
T 1487169427 18<b4n18>	anyway, I guess on my side it's alright now as the braille part is seen
T 1487169431 18<b4n18>	joanie: okay, thanks
T 1487169432 18<joanie18>	got a deadline I need to meet in the meantime
T 1487169457 18<joanie18>	thanks for implementing the table iface :)
T 1487169496 18<b4n18>	actually I switched elements because there are weird things in XUL, but well
T 1487169518 18<b4n18>	but in the end yeah, better :)
T 1487169722 18<b4n18>	joanie: BTW, Orca uses the Text interface and not the accessible-name... I guess it's expected? but that's not really appropriate for my case because the text is merely what's displayed, and it's abbreviated.  anyway, we can deal wit hthis later, no biggie, just mentioning
T 1487169777 18<joanie18>	it sometimes uses the name and sometimes the text depending on the situation. hack arounds due to miscellaneous crap.
T 1487169787 18*	joanie goes back to deadline work
T 1487193328 18<joanie18>	b4n: Should be fixed in Orca master now.
T 1487193353 18<joanie18>	related aside: Now that Orca is presenting the week numbers, I wonder if the row headers should include some indication of being a week
T 1487193378 18<joanie18>	otherwise you get the week number (just the int) followed by "row header" followed by the selected day in the calendar
T 1487261608 19*	Now talking on 22#a11y
T 1487286330 18<Fudge18>	hey joanie 
T 1487286351 18<Fudge18>	not sure what work you've done in the past few weeks but my ebay.com.au experience is now so much better than what it was
T 1487368284 20*	Disconnected (20Connection reset by peer)
T 1487368297 19*	Now talking on 22#a11y
T 1488809893 19*	Now talking on 22#a11y
T 1488817102 20*	Disconnected (20Connection timed out)
T 1488817116 19*	Now talking on 22#a11y
T 1488819302 20*	Disconnected (20Connection timed out)
T 1488819315 19*	Now talking on 22#a11y
T 1488896854 19*	Now talking on 22#a11y
T 1488988162 18<joanie18>	mgorse: When I use Atspi via gobject introspection rather than via pyatspi, I still see this bug: https://bugzilla.gnome.org/show_bug.cgi?id=677070. 
T 1488988200 18<joanie18>	Looking at this other bug, I would have assumed the issue is fixed: https://bugzilla.gnome.org/show_bug.cgi?id=646581
T 1488988207 18<joanie18>	Any ideas/suggestions?
T 1488988240 FiSHLiM plugin unloaded
T 1488991722 19*	Now talking on 22#a11y
T 1488996027 18<mgorse18>	joanie: Hmm. I'll take a look. I guess I should modify the listener to use the gobject-introspection binding directly, rather than pyatspi
T 1488996053 18<joanie18>	mgorse: thanks!
T 1489003017 18<mgorse18>	joanie: Now I'm looking at the pygobject bug. I was asked to commit my patch to the 2.28 branch but not master, since the code in master was being rewritten. I need to go and look at what's in master--looks like the bug isn't fixed there.
T 1489003065 18<mgorse18>	Hmm. I didn't write a test for it? No wonder
T 1489003069 18<joanie18>	mgorse: yeah, saw that. But also saw the comment from the maintainer that he was going to make all things awesome thus the patch wasn't needed in master (I paraphrase)
T 1489043333 20*	Disconnected (20Connection reset by peer)
T 1489043347 19*	Now talking on 22#a11y
T 1489072239 20*	Disconnected (20Connection reset by peer)
T 1489072252 19*	Now talking on 22#a11y
T 1489085373 18<mgorse18>	joanie: I just submitted another patch for bug 646581 (it's a different problem from the original bug, but it results in the same problem). Waiting for a maintainer to review.
T 1489085439 18<joanie18>	mgorse: thanks
T 1489105312 18<TheMuso18>	Oh, mopidy uses gstreamer.
T 1489105341 18<TheMuso18>	whoops wrong channel.
T 1489118247 20*	Disconnected (20Connection reset by peer)
T 1489118260 19*	Now talking on 22#a11y
T 1489418279 20*	Disconnected (20Connection timed out)
T 1489418292 19*	Now talking on 22#a11y
T 1489421191 20*	Disconnected (20Connection timed out)
T 1489421204 19*	Now talking on 22#a11y
T 1489606422 19*	Now talking on 22#a11y
T 1489607508 20*	Disconnected (20Connection timed out)
T 1489607521 19*	Now talking on 22#a11y
T 1489705614 19*	Now talking on 22#a11y
T 1489724607 18<Fudge18>	joanie:  ping pong
T 1489728700 18<TheMuso18>	Fudge: Whats up? Maybe I can help.
T 1489728716 18<TheMuso18>	Fudge: Just ask, and she will get back to you when she can.
T 1489728734 18<Fudge18>	TheMuso:  oh thank you but i'll email, it's nothing important
T 1489729082 18<Fudge18>	thanks though mate
T 1489729276 18<TheMuso18>	np
T 1490015651 19*	Now talking on 22#a11y
T 1490023197 20*	Disconnected (20Connection timed out)
T 1490023212 19*	Now talking on 22#a11y
T 1490025004 20*	Disconnected (20Connection timed out)
T 1490025017 19*	Now talking on 22#a11y
T 1490266429 18<Fudge18>	mgorse:  hopefully that tb helps :) I still get the same problem often
T 1490281570 18<joanie18>	mgorse: When you get a chance, could you please look at https://bugzilla.mozilla.org/show_bug.cgi?id=1348340. I can also reproduce that problem using WebKitGtk. It's not clear if it's the bridge or ATK itself, but atspi_table_cell_get_position() crashes software reliably.
T 1490285533 18<mgorse18>	joanie: Okay, I'll take a look. I'm not surprised; don't think I even tested that code
T 1490291717 18<mgorse18>	joanie: Do I need a recent version of firefox? I'm getting a NotImplementedError when I try with 48.0.1, though I could be looking at the wrong cell
T 1490291739 18<joanie18>	mgorse: you need a more recent version
T 1490291744 18<mgorse18>	ok
T 1490291757 18<joanie18>	it was added last fall I think
T 1490627877 20*	Disconnected (20Connection timed out)
T 1490627891 19*	Now talking on 22#a11y
T 1490632571 20*	Disconnected (20Connection timed out)
T 1490632586 19*	Now talking on 22#a11y
T 1491225342 19*	Now talking on 22#a11y
T 1491232382 20*	Disconnected (20Connection timed out)
T 1491232395 19*	Now talking on 22#a11y
T 1491236382 20*	Disconnected (20Connection timed out)
T 1491236396 19*	Now talking on 22#a11y
T 1491334043 20*	Disconnected (20Connection timed out)
T 1491334057 19*	Now talking on 22#a11y
T 1491350867 20*	Disconnected (20Connection timed out)
T 1491350880 19*	Now talking on 22#a11y
T 1491354672 20*	Disconnected (20Connection timed out)
T 1491354686 19*	Now talking on 22#a11y
T 1491356394 20*	Disconnected (20Remote host closed socket)
T 1491357051 19*	Now talking on 22#a11y
T 1491390877 18<lolek18>	hello
T 1491390909 18<lolek18>	is there anywhere some information about Atk::Implementor::ref_accessibile_vfunc it's just I'm unable to find anything about it
T 1491401621 20*	Disconnected (20Connection timed out)
T 1491401634 19*	Now talking on 22#a11y
T 1491404777 19*	Now talking on 22#a11y
T 1491420794 20*	Disconnected (20Connection timed out)
T 1491420807 19*	Now talking on 22#a11y
T 1491475819 18*	mclasen hasn't been here in a while
T 1491475898 18<TheMuso18>	Its pretty quiet round these parts.
T 1491475985 18<mclasen18>	I just looked at a11y vs sandboxes again
T 1491475993 18<mclasen18>	and did a quick experiment
T 1491476003 18<mclasen18>	point d-feet at the a11y bus
T 1491476007 18<mclasen18>	locate the bus name of gnome-shell
T 1491476017 18<mclasen18>	and randomly call DoAction(20) on some object
T 1491476025 18<mclasen18>	for a  very sudden exit from your session :-(
T 1491476046 18<mclasen18>	so I am coming to the conclusion that we can't allow the a11y bus into sandboxes at all, with the current state of affairs
T 1491476228 18<TheMuso18>	No idea on whether anybody else has tested a11y with flatpack GTK apps. I certainly haven't so this doesn't surprise me.
T 1491476243 18<mclasen18>	its not about flatpak at all
T 1491476263 18<mclasen18>	just about allowing everybody to inject unvalidated command into everybody else
T 1491476274 18<TheMuso18>	Oh right.
T 1491476368 18<mclasen18>	my simpleminded idea before this experiment was that maybe this needs to be split into a 'sendkeys' interface on the AT / registry side that sandboxed apps would be allowed to talk to, and an 'injectcommands' interface that they expose, but can't talk to
T 1491476432 18<mclasen18>	but there's too many layers here for me to say how feasible this is
T 1491476447 18<TheMuso18>	If you are talking about keyboard/mouse input specifically, then there is actually work needing to be done there indeed.
T 1491476467 18<mclasen18>	that is the only thing that apps need to actively send out over the bus, right ?
T 1491476529 18<TheMuso18>	Well, there is a couple of things I think. There is the atk/at-spi action API/object, and then there is tools like orca needing to intercept input events to allow the user to execute keyboard shortcuts to control Orca.
T 1491476555 18<mclasen18>	it would be nicer if ATs could get their input interception done at the compositor 
T 1491476573 18<TheMuso18>	Yep, GTK currently does the work now.
T 1491476578 18<mclasen18>	but thats a bit complementary
T 1491476595 18<TheMuso18>	Funny you should say that, I've been looking into what is needed spec wise to coordinate and coolaborate on getting such a thing into the comositor.
T 1491476611 18<mclasen18>	we're in the same spot with input methods:
T 1491476618 18<TheMuso18>	Right.
T 1491476634 18<mclasen18>	would be nice to do compositor-side (text protocol) but we're using the client-side ibus approach just fine for now
T 1491476643 18<mclasen18>	and unsurprisingly, it has a similar issue with sandboxes
T 1491476649 18<TheMuso18>	I was needing to look into this for Unity 8... Even though that is no longer a thing, the work still needs doing.
T 1491476671 18<mclasen18>	but a bit more manageable, since there's not 'inject arbitrary commands' api that goes with it
T 1491476698 18<TheMuso18>	Orca via at-spi using X also controls the mouse pointer, which again is something needing to be done with the compositor.
T 1491476741 18<mclasen18>	yeah, that calls for a privileged DeviceEventController api in the compositor
T 1491476782 18<TheMuso18>	Right. Down the road, Orca will also want to intercept touch events too.
T 1491476813 18<TheMuso18>	At least I think it will.
T 1491476816 18<TheMuso18>	Others may disagree.
T 1491476868 18<mclasen18>	I would be happy to find a solution that makes actual screen reading work in sandboxes
T 1491476881 18<mclasen18>	no need to go all in, some things in orca may just not be a good idea...
T 1491476990 18<TheMuso18>	Right, I need to better familiarize myself with this I guess.
T 1491478500 18<mclasen18>	as always I come away thinking a simple client-side 'call out to pulseaudio' solution would get us 80% of the way for screen reading :-(
T 1491478568 18<TheMuso18>	Well Orca uses speech-dispatcher, which in turn uses pulseaudio.
T 1491478639 18<mclasen18>	I'm just pining for the simplicitly of 'no bus, no abstraction, no mess'
T 1491478714 18<mclasen18>	but I need to be on my way. Later!
T 1491503381 18<ahmed18>	a
T 1491504023 18<kollk18>	hi
T 1491504031 18<jelliott1518>	Yo I am here.
T 1491504042 18<jelliott1518>	SECOND
T 1491504130 18<kollk18>	hi
T 1491504132 18<kollk18>	again
T 1491504213 18<HannahM18>	hi
T 1491504308 18<kollk18>	who is bastinailso
T 1491504311 18<kollk18>	raise your hand
T 1491512499 20*	Disconnected (20Connection timed out)
T 1491512513 19*	Now talking on 22#a11y
T 1491585371 20*	Disconnected (20Connection timed out)
T 1491585384 19*	Now talking on 22#a11y
T 1491832607 19*	Now talking on 22#a11y
T 1491837369 20*	Disconnected (20Connection timed out)
T 1491837386 19*	Now talking on 22#a11y
T 1491840339 20*	Disconnected (20Connection timed out)
T 1491840352 19*	Now talking on 22#a11y
T 1491919776 19*	Now talking on 22#a11y
T 1491996811 19*	Now talking on 22#a11y
T 1491997862 20*	Disconnected (20Connection timed out)
T 1491997875 19*	Now talking on 22#a11y
T 1492001649 19*	Now talking on 22#a11y
T 1492009194 19*	Now talking on 22#a11y
T 1492011419 19*	Now talking on 22#a11y
T 1492011614 18<schoppenhauer18>	joanie: thx, looks promising
T 1492094921 20*	Disconnected (20Connection timed out)
T 1492094935 19*	Now talking on 22#a11y
T 1492098366 20*	Disconnected (20Connection timed out)
T 1492098380 19*	Now talking on 22#a11y
T 1492098515 FiSHLiM plugin unloaded
T 1492098983 19*	Now talking on 22#a11y
T 1492520038 19*	Now talking on 22#a11y
T 1492525818 19*	Now talking on 22#a11y
T 1492525907 19*	Now talking on 22#a11y
T 1492527830 19*	Now talking on 22#a11y
T 1492620146 19*	Now talking on 22#a11y
T 1492676114 18<alexarnaud18>	Hello joanie, have done something special to support Google Doc? We try to have focus tracking with Compiz and Ezoom on it but it makes us crazy because of we think non-standard AT-SPI events. If you have any information on that we really appreciate it. :)
T 1492676114 18<alexarnaud18>	Thanks in advance.
T 1492676539 18<joanie18>	alexarnaud: Google docs accessibility works via a complex ARIA liveregion hack done by Google. Orca has ARIA liveregion support. My guess is that your magnifiers don't.
T 1492676610 18<joanie18>	But this is, presumably, also an issue for other platforms. So maybe Google Docs has additional support for magnifiers.
T 1492676638 18<joanie18>	Were I you, I'd figure out how Windows users with low vision use Google Docs with their magnifiers.
T 1492681146 18<alexarnaud18>	joanie: thank you very much for the precision
T 1492690160 18<alexarnaud18>	joanie: is the aria liveregion events come from FIrefox to AT-SPI2?
T 1492690199 18<joanie18>	alexarnaud: need to walk away now, but yes
T 1492690210 18<joanie18>	or really they come from google docs to Gecko
T 1492690221 18<joanie18>	and from there to AT-SPI2
T 1492690252 18<alexarnaud18>	ksamak: https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions
T 1492690723 18<alexarnaud18>	joanie: thank you
T 1492697499 19*	Now talking on 22#a11y
T 1492712508 19*	Now talking on 22#a11y
T 1492722611 19*	Now talking on 22#a11y
T 1492777419 19*	Now talking on 22#a11y
T 1492779292 19*	Now talking on 22#a11y
T 1492780883 19*	Now talking on 22#a11y
