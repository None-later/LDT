T 1469554549 18<akurtakov>	and I can continue :)
T 1469554555 18<akurtakov>	gdk drawing also 
T 1469554569 18<akurtakov>	anyway, dinner really
T 1469554777 20<lufimtse>30	I see
T 1469554779 20<lufimtse>30	interesting.
T 1469554785 20<lufimtse>30	enjoy
T 1469562758 20<lufimtse>30	u still around?
T 1469562765 18<akurtakov>	yes
T 1469562783 20<lufimtse>30	just curious, is Eclipse+GTK2 officially in "maintenance" mode?
T 1469562786 20<lufimtse>30	like the gtk2 part
T 1469562808 20<lufimtse>30	I.e, would that imply no new features in that combo?
T 1469562813 20<lufimtse>30	just fix bugs
T 1469562826 18<akurtakov>	this is the message I send on Red Hat behalf
T 1469562839 18<akurtakov>	definetely if adding new features
T 1469562845 18<akurtakov>	we are not interested in gtk2
T 1469562859 18<akurtakov>	e.g. eric's alpha work will be gtk3 only and etc.
T 1469562865 20<lufimtse>30	I'm just reading Markus's comment
T 1469562877 18<akurtakov>	if it's in the shared code we will not ifdef gtk2
T 1469562886 18<akurtakov>	but otherwise fixes for gtk3 only from our team
T 1469562897 18<akurtakov>	new one?
T 1469562902 20<lufimtse>30	na
T 1469562902 18<akurtakov>	or the one I replied to?
T 1469562907 20<lufimtse>30	the one u replied to. 
T 1469562943 18<akurtakov>	I have sent the message multiple times that we are not going to spend time on gtk2
T 1469563275 20<lufimtse>30	was thinking of +1 on grounds that we no longer add new features to gtk2
T 1469563296 20<lufimtse>30	then wanted to check with you if we are in maintenance mode
T 1469563318 18<akurtakov>	well better to play the bad cop/good cop sometimes
T 1469563324 18<akurtakov>	let me be the bad one this time
T 1469563604 18<akurtakov>	btw, do you mind if I remove the CAUTION section
T 1469563650 18<akurtakov>	I don't like the idea of this warning message when you know exactly what you do
T 1469563966 18<akurtakov>	I'll reduce the output and commit it
T 1469564015 20<lufimtse>30	that's ok
T 1469564023 20<lufimtse>30	was thinking of removing it also
T 1469564031 20<lufimtse>30	considering maven...
T 1469564053 18<akurtakov>	there is also the double OS/ARCH announcement first and fifth line
T 1469564063 20<lufimtse>30	hmmm
T 1469564065 18<akurtakov>	will leave the later
T 1469564109 18<akurtakov>	https://paste.fedoraproject.org/395992/14695640/
T 1469564117 18<akurtakov>	1 and 5 in this paste
T 1469564209 20<lufimtse>30	I guess that's just info on which GTK is being build. I could compress it into a single line?
T 1469564213 20<lufimtse>30	if you give me 10 mins
T 1469564224 18<akurtakov>	nah, I'm on it 
T 1469564247 20<lufimtse>30	I.e, like put it into a variable and use it in both build places... 
T 1469564265 18<akurtakov>	it's about the output
T 1469564274 18<akurtakov>	the two lines contain exactly the same info
T 1469564298 20<lufimtse>30	how so?
T 1469564305 20<lufimtse>30	one says architecture, one says gtk2/gtk3
T 1469564313 20<lufimtse>30	oh
T 1469564315 20<lufimtse>30	sec
T 1469564319 20<lufimtse>30	me read wrong thing
T 1469564336 20<lufimtse>30	yah, I see what you mean
T 1469564336 18<akurtakov>	:)
T 1469564407 20<lufimtse>30	Yea, I see. Good observation X-D
T 1469564505 18<akurtakov>	when grep is your most used command duplication is bad :)
T 1469564523 20<lufimtse>30	good point.
T 1469564542 18<akurtakov>	https://git.eclipse.org/r/#/c/77357/11..12/bundles/org.eclipse.swt/Eclipse+SWT+PI/gtk/library/build.sh
T 1469564550 18<akurtakov>	I'll push it now
T 1469564604 20<lufimtse>30	kk
T 1469564719 18<akurtakov>	assuming there is no further work planned you can close the bug :)
T 1469564725 18<akurtakov>	nice improvement
T 1469564733 20<lufimtse>30	well
T 1469564737 20<lufimtse>30	still gotta update wiki
T 1469564751 20<lufimtse>30	let's keep bug open till then
T 1469564756 18<akurtakov>	ok
T 1469564761 20<lufimtse>30	I'll post in bug about wiki update, then .... 
T 1469565247 18<akurtakov>	will this ever end https://git.eclipse.org/r/#/c/77934/
T 1469565289 18<akurtakov>	I'm kind of tired of doing this stuff every time I look at a file
T 1469566417 20<lufimtse>30	oh ^_^
T 1469566421 20<lufimtse>30	I forgot to remove those
T 1469566422 20<lufimtse>30	lols
T 1469630729 20*	Disconnected (20Connection timed out)
T 1469642521 18<akurtakov>	I'm eager to test the webkit2 exec patch :0
T 1469642555 18<akurtakov>	sounds like smth that would help my local install using webkit2 :)
T 1469642569 20<lufimtse>30	getting there
T 1469642573 20<lufimtse>30	tidying up commit atm
T 1469642589 20<lufimtse>30	It's a good idea to submit lots of little patches I think
T 1469642608 20<lufimtse>30	I'm creating my own repo for bug snippets, as at the moment they're just too all over the place.
T 1469642618 20<lufimtse>30	gimme 10 mins. 
T 1469642778 20<lufimtse>30	Do you have any good way to tell if webkit1 or webkit2 is runnning?
T 1469642788 20<lufimtse>30	I currently stuff a printline into WebKit.java
T 1469642792 20<lufimtse>30	just after WEBKIT2
T 1469642802 20<lufimtse>30	just kinda tedious to deal with it during commits
T 1469642887 18<akurtakov>	use the env variable
T 1469642899 20<lufimtse>30	I mean like when you run a snippet
T 1469642904 20<lufimtse>30	I want to verify it's on webkit2.
T 1469642919 20<lufimtse>30	just to keep sane
T 1469642948 20<lufimtse>30	atm I put a println after WEBKIT2 saying "Webkit2 has loaded"
T 1469642956 20<lufimtse>30	but everytime I do a commit, I have to remote that println
T 1469642959 20<lufimtse>30	and then put it back
T 1469642959 20<lufimtse>30	meh
T 1469642973 20<lufimtse>30	or have faith that snippet truly runs webkit2
T 1469642998 20<lufimtse>30	normally in gtk inspector I can read Gtk version, would be nice to have something equivalent for webkit version
T 1469643000 20<lufimtse>30	but meh.
T 1469643010 18<akurtakov>	http://git.eclipse.org/c/platform/eclipse.platform.swt.git/commit/?id=d087a6b7e24c09db8fa729b985383ba168fb4055
T 1469643012 18<akurtakov>	:)
T 1469643042 18<akurtakov>	so System.getenv("org.eclipse.swt.internal.webkitgtk.version") will give you the version 
T 1469643054 18<akurtakov>	but only after webkit has been initialized
T 1469643087 20<lufimtse>30	sorta what I'm looking for I guess
T 1469643101 20<lufimtse>30	you mean I can stuff that into snippet?
T 1469643103 20<lufimtse>30	lemme try
T 1469643107 18<akurtakov>	yes
T 1469643252 20<lufimtse>30	hmm, seems to return null for me.
T 1469643259 20<lufimtse>30	do you happen to have a snippet that works with this?
T 1469643279 20<lufimtse>30	I run that when a webkit widget has already been loaded.
T 1469645250 18<akurtakov>	works for the ide http://git.eclipse.org/c/platform/eclipse.platform.ui.git/commit/?id=0f0d8b4f63b7b569f675138bde11bc576f14d9b9
T 1469645328 20<lufimtse>30	btw, the save actions keep changing imports
T 1469645329 20<lufimtse>30	like: import org.eclipse.swt.internal.C;
T 1469645332 20<lufimtse>30	to import org.eclipse.swt.internal.*
T 1469645339 20<lufimtse>30	I guess we don't mind?
T 1469645343 18<akurtakov>	yup
T 1469645346 20<lufimtse>30	kk
T 1469645362 18<akurtakov>	sooner or later it will modify everything :)
T 1469645794 20<lufimtse>30	I see
T 1469645795 20<lufimtse>30	kk
T 1469645798 20<lufimtse>30	https://github.com/LeoUfimtsev/swt.snippets/blob/master/swt.crossplatform.snippets/generic/browser/Snip_Browser_Javascript_execute.java
T 1469645801 20<lufimtse>30	^^ snippet 
T 1469645806 20<lufimtse>30	patch
T 1469645806 20<lufimtse>30	https://git.eclipse.org/r/#/c/78014/
T 1469645818 20<lufimtse>30	before patch, try running snippet in W2
T 1469645825 20<lufimtse>30	buttons don't change background
T 1469645829 20<lufimtse>30	then apply patch
T 1469645836 20<lufimtse>30	then try snippet again. 
T 1469645856 20<lufimtse>30	fyi, this is the repo I made: https://github.com/LeoUfimtsev/swt.snippets
T 1469645860 20<lufimtse>30	for my future snippets
T 1469646094 20<lufimtse>30	----
T 1469646105 20<lufimtse>30	btw, thank you for snippet, that prints webkitgtk version
T 1469646110 20<lufimtse>30	*thumbs up*
T 1469646112 20<lufimtse>30	life is good.
T 1469648010 20<lufimtse>30	---
T 1469648018 20<lufimtse>30	I'm getting a strange error in swt.tests:
T 1469648019 20<lufimtse>30	Access restriction: The field 'MozillaVersion.VERSION_XR1_9_2' is not API (restriction on required project 'org.eclipse.swt')
T 1469648024 20<lufimtse>30	and other alike...
T 1469648030 20<lufimtse>30	any ideas how to fix?
T 1469648072 18<akurtakov>	ignore :)
T 1469648083 20<lufimtse>30	it only started today
T 1469648087 20<lufimtse>30	hasn't happened before
T 1469648089 18<akurtakov>	hmm
T 1469648097 20<lufimtse>30	i usually try to keep workspace problem fere
T 1469648100 20<lufimtse>30	free*
T 1469648117 18<akurtakov>	even after restart of eclipse and rebuild workspace
T 1469648119 18<akurtakov>	?
T 1469648203 20<lufimtse>30	ok, closing eclipse and opening worked wonders
T 1469648211 20<lufimtse>30	X-D
T 1469648227 20<lufimtse>30	one of those odd things..
T 1469648344 18<akurtakov>	I'll minimize your commit message :)
T 1469648390 20<lufimtse>30	I see
T 1469648393 20<lufimtse>30	kinda long I guess
T 1469648419 20<lufimtse>30	I can shorten it ?
T 1469648425 20<lufimtse>30	you mean the URL part?
T 1469648432 18<akurtakov>	no
T 1469648438 18<akurtakov>	Part 1: (work in progress, but can be commited)
T 1469648440 18<akurtakov>	(The idea is to have more partial commits instead of one huge commit)
T 1469648452 18<akurtakov>	not related to the commit :)
T 1469648458 20<lufimtse>30	I see
T 1469648464 20<lufimtse>30	good point
T 1469648477 20<lufimtse>30	I guess those are better put into the comments
T 1469648510 18<akurtakov>	do you use git log ?
T 1469648517 20<lufimtse>30	not much
T 1469648524 20<lufimtse>30	I use the history view in eclipse
T 1469648536 18<akurtakov>	I do for preparing release notes :)
T 1469648549 20<lufimtse>30	I see
T 1469648552 18<akurtakov>	an explanation why I care for these things :)
T 1469648730 20<lufimtse>30	The webkit work is quite demanding
T 1469648734 20<lufimtse>30	phew
T 1469648739 20<lufimtse>30	sometimes hard to stay focused
T 1469649072 18<akurtakov>	it's in :)
T 1469649081 18<akurtakov>	yeah, focusing is quite hard
T 1469649090 20<lufimtse>30	nice nice
T 1469649096 18<akurtakov>	I almost gave up 
T 1469649143 18<akurtakov>	spending 3h on the phone today and talking about N-teen different things if smth needs deepdiving I'm just not left to do it
T 1469649166 20<lufimtse>30	^__^
T 1469649174 18<akurtakov>	actually if I want to do real development I have to stop irc, not check mail and etc. to not be bothered
T 1469649315 20<lufimtse>30	hmm, maybe I should focus more on getting one thing done at a time.
T 1469649394 18<akurtakov>	I don't give suggestion on "how" one to organize his workflow
T 1469649404 18<akurtakov>	usually it's strictly personal
T 1469649416 20<lufimtse>30	I see
T 1469649424 18<akurtakov>	what works for me would not for  you and vice-versa
T 1469649428 20<lufimtse>30	I'm often curious to see other dev's workflows thou.
T 1469649435 20<lufimtse>30	kinda pick up things as I go along.
T 1469649595 18<akurtakov>	my workflow - have clear goal - do whatever needed with whatever tool possible to achieve it :)
T 1469649605 20<lufimtse>30	I see
T 1469649619 20<lufimtse>30	BTW, the browser tests are utterly slow (lots of odd 'wait' loops). Unless you know of a good reason why, I wanna speed them up a bit.
T 1469649634 20<lufimtse>30	unless you know of a good reason why they are so slow*
T 1469649656 20<lufimtse>30	Like when I make a change, running junits takes for evea
T 1469649705 18<akurtakov>	honestly I never understood these tests
T 1469649715 18<akurtakov>	what I know is that these are the most fragile tests :)
T 1469649741 20<lufimtse>30	I see
T 1469649743 18<akurtakov>	if you do major changes - be ready to react on every builder update :)
T 1469649760 20<lufimtse>30	How do I check builder logs
T 1469649776 18<akurtakov>	http://download.eclipse.org/eclipse/downloads/drops4/N20160726-2000/
T 1469649781 18<akurtakov>	everything is there
T 1469649784 18<akurtakov>	from the huge log
T 1469649824 18<akurtakov>	down to table test results like http://download.eclipse.org/eclipse/downloads/drops4/N20160726-2000/testresults/html/org.eclipse.pde.ui.tests_ep47N-unit-lin64_linux.gtk.x86_64_8.0.html
T 1469649870 18<akurtakov>	or the individual textual output http://download.eclipse.org/eclipse/downloads/drops4/N20160726-2000/logs.php#console
T 1469649884 18<akurtakov>	it takes a bit of time to find your way 
T 1469649902 18<akurtakov>	but there are enough battles for me to try improving that :)
T 1469649916 20<lufimtse>30	I see
T 1469649990 18<akurtakov>	so will you try to make the async to sync onthe C side or Java side?
T 1469650001 20<lufimtse>30	well
T 1469650007 20<lufimtse>30	thought in progress
T 1469650016 20<lufimtse>30	Sami did it on the java side
T 1469650018 20<lufimtse>30	via callback
T 1469650027 20<lufimtse>30	and a hashmap with counters.
T 1469650032 18<akurtakov>	would you please point me to it?
T 1469650048 20<lufimtse>30	Sec
T 1469650069 20<lufimtse>30	So:...
T 1469650082 20<lufimtse>30	https://git.eclipse.org/r/#/c/23416/16/bundles/org.eclipse.swt/Eclipse+SWT+WebKit/gtk/org/eclipse/swt/browser/WebKit.java
T 1469650096 20<lufimtse>30	private static HashMap<Integer, Long> jsResults = new HashMap<Integer, Long>();
T 1469650096 20<lufimtse>30	private static int jsCounter = 0;
T 1469650106 20<lufimtse>30		private static Callback executeJavaScriptFinishedCallback;
T 1469650111 20<lufimtse>30		executeJavaScriptFinishedCallback = new Callback(WebKit.class, "executeJavaScriptFinishedCallback", 3);
T 1469650115 20<lufimtse>30	The the actual callback:
T 1469650120 20<lufimtse>30	@SuppressWarnings("unused")
T 1469650120 20<lufimtse>30	private static long /*int*/ executeJavaScriptFinishedCallback (long /*int*/ source_object, long /*int*/ res, long /*int*/ user_data){
T 1469650120 20<lufimtse>30		long /*int*/[] error = new long /*int*/[1];
T 1469650120 20<lufimtse>30		long /*int*/ result = OS.g_dbus_proxy_call_finish (dbus_proxy, res, error); // << I may have to hack this to be more like native result getter.
T 1469650120 20<lufimtse>30		int counter = (int) user_data;
T 1469650120 20<lufimtse>30		if (error[0] != 0){
T 1469650120 20<lufimtse>30			SWT.error(SWT.ERROR_IO, new Throwable(Converter.getString(OS.g_error_get_message(error[0]))));
T 1469650120 20<lufimtse>30			result = 0;
T 1469650120 20<lufimtse>30		}
T 1469650120 20<lufimtse>30		jsResults.put(counter, (long)result);  // Stuff is inserted into a counter, there is probably a spin-lock checking this counter's result somewhere...
T 1469650120 20<lufimtse>30		return 0;
T 1469650120 20<lufimtse>30	}
T 1469650135 20<lufimtse>30	Then 
T 1469650142 20<lufimtse>30	For the JS, he loops
T 1469650148 20<lufimtse>30	till callback puts something back into hashtable
T 1469650149 20<lufimtse>30	:
T 1469650149 20<lufimtse>30	private boolean webkit_extension_execute_script (long pageId, String script, String url){
T 1469650149 20<lufimtse>30		long /*int*/ args[] = { OS.g_variant_new_uint64(pageId),
T 1469650149 20<lufimtse>30				OS.g_variant_new_string (Converter.wcsToMbcs(null, script, true)),
T 1469650149 20<lufimtse>30				OS.g_variant_new_string (Converter.wcsToMbcs(null, url, true))};
T 1469650149 20<lufimtse>30		final long /*int*/ argsTuple = OS.g_variant_new_tuple(args, args.length);
T 1469650149 20<lufimtse>30		int currentCounter = jsCounter++;
T 1469650149 20<lufimtse>30		OS.g_dbus_proxy_call (dbus_proxy,
T 1469650149 20<lufimtse>30				Converter.wcsToMbcs(null,"webkit_extension_execute_script", true),
T 1469650149 20<lufimtse>30				argsTuple, OS.G_DBUS_CALL_FLAGS_NO_AUTO_START, -1, 0, executeJavaScriptFinishedCallback.getAddress(),currentCounter);
T 1469650149 20<lufimtse>30		// The following is a workaround for the fact that g_dbus_proxy_call_sync
T 1469650149 20<lufimtse>30		// blocks until it is timed-out and returns a failure.
T 1469650149 20<lufimtse>30		// Keep iterating through the event loop until our JavaScript call has finished
T 1469650149 20<lufimtse>30		// executing, failed, or timed-out.
T 1469650149 20<lufimtse>30		Display display = this.browser.getDisplay();
T 1469650149 20<lufimtse>30		while (!display.isDisposed() && jsResults.get(currentCounter) == null) {
T 1469650149 20<lufimtse>30			if (!display.readAndDispatch()) display.sleep();
T 1469650149 20<lufimtse>30		}
T 1469650149 20<lufimtse>30		long result = jsResults.remove(currentCounter);
T 1469650149 20<lufimtse>30		if (result == 0){
T 1469650149 20<lufimtse>30			return false;
T 1469650149 20<lufimtse>30		}
T 1469650149 20<lufimtse>30		return (Boolean) ((Object[])GVariantConverter.convertGVariantToJava((long /*int*/ )result))[0];
T 1469650149 20<lufimtse>30	}
T 1469650160 20<lufimtse>30	----------
T 1469650171 20<lufimtse>30	i.e, for every new call, he adds something to counter
T 1469650189 20<lufimtse>30	then loops on that item's value till it's filled by callback.
T 1469650202 20<lufimtse>30	i.e, it's a basic spin-lock of sort.
T 1469650223 20<lufimtse>30	mind you the above also has DBus and all that, which is not really needed anymore 
T 1469650233 18<akurtakov>	yeah, I see that
T 1469650254 18<akurtakov>	which one would be simpler/more readable option for you?
T 1469650264 20<lufimtse>30	hmmmm
T 1469650339 20<lufimtse>30	is SWT single threaded?
T 1469650342 20<lufimtse>30	well
T 1469650348 20<lufimtse>30	there is the display.async
T 1469650349 20<lufimtse>30	so I gues snot
T 1469650355 20<lufimtse>30	guess not*
T 1469650359 20<lufimtse>30	so we need sync logic
T 1469650365 20<lufimtse>30	java has nice atomic structures
T 1469650376 20<lufimtse>30	atomic hashmaps... 
T 1469650388 20<lufimtse>30	doing the same thing in C might get hairy
T 1469650392 20<lufimtse>30	with plocks and all
T 1469650407 18<akurtakov>	hmm, not GTask ?
T 1469650416 20<lufimtse>30	GTask? Lemme read.
T 1469650425 18<akurtakov>	https://developer.gnome.org/gio/stable/GTask.html
T 1469650548 20<lufimtse>30	Essentially, what it comes down to is that there may be multiple JS calls (ex if you have two or more webkit widgets), and I need to match up a JS callback with it's original caller.
T 1469650548 18<akurtakov>	or the underlying https://developer.gnome.org/gio/stable/GSimpleAsyncResult.html 
T 1469650561 20<lufimtse>30	I'm kinda thinking about how to do that... 
T 1469650564 20<lufimtse>30	best... 
T 1469650584 20<lufimtse>30	u don't happen to know if we do that somewhere in swt already?
T 1469650602 18<akurtakov>	can't think of a place
T 1469650652 18<akurtakov>	btw, if you do it on the C side
T 1469650672 18<akurtakov>	you shouldn't need to match callback with caller
T 1469650687 18<akurtakov>	as you would have pointer to it
T 1469650690 20<lufimtse>30	is that so?
T 1469650692 20<lufimtse>30	hmm
T 1469650694 20<lufimtse>30	thinking
T 1469650740 20<lufimtse>30	is there a way to create a function dynamically in C from within a function?
T 1469650751 20<lufimtse>30	I may be missing understading of dynamic functions in C, gotta read up on it.
T 1469650754 20<lufimtse>30	interesting line of thought
T 1469650756 18<akurtakov>	no
T 1469650801 18<akurtakov>	I'm thinking of 
T 1469650802 18<akurtakov>	swt_webkit_web_view_run_javascript () 
T 1469650804 18<akurtakov>	swt_webkit_web_view_run_javascript_callback()
T 1469650860 18<akurtakov>	if in the former you call webkit_web_view_run_javascript passing the callback 
T 1469650896 18<akurtakov>	and wait until the callback returns
T 1469650917 20<lufimtse>30	suppose you have multiple JS invocations
T 1469650918 20<lufimtse>30	A
T 1469650919 20<lufimtse>30	B
T 1469650922 20<lufimtse>30	A runs first
T 1469650925 20<lufimtse>30	then B runs,
T 1469650925 18<akurtakov>	you would be in the same context which no other jni call will interfere with
T 1469650940 20<lufimtse>30	..
T 1469650941 20<lufimtse>30	hmm
T 1469650948 20<lufimtse>30	you mean block till JS returns?
T 1469650952 18<akurtakov>	yes
T 1469650956 20<lufimtse>30	hmmm
T 1469650959 20<lufimtse>30	that makes sense
T 1469650960 18<akurtakov>	as if it's sync one
T 1469650978 20<lufimtse>30	haven't thought about it that way, but now that you're saing it
T 1469650984 20<lufimtse>30	in C that's the case
T 1469650990 20<lufimtse>30	nothing to block... 
T 1469650995 20<lufimtse>30	nothing to interrupt*
T 1469651006 20<lufimtse>30	not a bad idea actually
T 1469651010 18<akurtakov>	yes, block vs. map/sync
T 1469651023 20<lufimtse>30	the map/sync kinda feels messy
T 1469651028 20<lufimtse>30	block probably better
T 1469651036 20<lufimtse>30	since it's block on java side any way
T 1469651082 20<lufimtse>30	I guess there are no concurrent JNI calls?
T 1469651098 18<akurtakov>	not from swt side
T 1469651104 20<lufimtse>30	ah yea, we have the locking logic
T 1469651108 20<lufimtse>30	in OS.java
T 1469651117 18<akurtakov>	the thread calling jni is single one
T 1469651148 20<lufimtse>30	nice
T 1469651153 20<lufimtse>30	I see,
T 1469651157 20<lufimtse>30	the lock is in Platform class
T 1469651165 20<lufimtse>30	ok, let's try the C road
T 1469651180 20<lufimtse>30	thanks for suggestion
T 1469651188 20<lufimtse>30	been stuck on that thought bubble for a while. 
T 1469651194 18<akurtakov>	I'm describing the simplest road in my head
T 1469651203 20<lufimtse>30	:-D
T 1469651205 18<akurtakov>	quite possible I miss some important detail :)
T 1469651211 20<lufimtse>30	who knows
T 1469651215 20<lufimtse>30	but that seems promising
T 1469651246 20<lufimtse>30	ok, I'll work on that. First I
T 1469651256 20<lufimtse>30	I'll add webkit_custom.h etc... 
T 1469651260 20<lufimtse>30	I'll keep you posted.
T 1469651455 18<akurtakov>	just as a reference I have booked g_task_run_in_thread_sync
T 1469651520 20<lufimtse>30	what do you mean booked?
T 1469651529 18<akurtakov>	bookmarked :)
T 1469651567 20<lufimtse>30	I see
T 1469651571 20<lufimtse>30	I'll tinker around with GTask
T 1469651575 20<lufimtse>30	on native snippet
T 1469651579 20<lufimtse>30	then port to SWT layer
T 1469651587 20<lufimtse>30	SWT's custom C layer**
T 1469715029 20<lufimtse>30	-----
T 1469715032 20<lufimtse>30	hey ya
T 1469715049 18<akurtakov>	hey, whats up
T 1469715050 20<lufimtse>30	I've started to check out the build jUnit logs you pointed me to
T 1469715055 20<lufimtse>30	testBrowser3 keeps failing
T 1469715062 20<lufimtse>30	does that occur much?
T 1469715073 20<lufimtse>30	and it doesn't fail on my system
T 1469715085 18<akurtakov>	you look at linux or centos column
T 1469715095 20<lufimtse>30	http://download.eclipse.org/eclipse/downloads/drops4/N20160725-2000/testresults/html/org.eclipse.swt.tests_ep47N-unit-lin64_linux.gtk.x86_64_8.0.html#AllBrowserTests
T 1469715119 18<akurtakov>	that's ancient sles 11 running with xulrunner not with webbrowser
T 1469715136 18<akurtakov>	webmaster promised to update it to sles 12 with webkitgtk
T 1469715140 18<akurtakov>	ignore this one for now
T 1469715175 20<lufimtse>30	ok.
T 1469715198 20<lufimtse>30	I'm just patching up a few of the jUnits to get them to run a bit quicker.
T 1469715205 20<lufimtse>30	~hope it doesn't cause breakage.
T 1469715215 20<lufimtse>30	just some of the wait times are outrageous
T 1469715217 18<akurtakov>	careful :)
T 1469715224 20<lufimtse>30	|-D
T 1469715228 20<lufimtse>30	let's see what happens. 
T 1469715234 18<akurtakov>	seen that build.sh broke on hpux :)
T 1469715245 20<lufimtse>30	just on hpux?
T 1469715253 18<akurtakov>	http://git.eclipse.org/c/platform/eclipse.platform.swt.git/commit/?id=bb87d69400922d842af2cdcb46b865a77d8495ff
T 1469715263 18<akurtakov>	well, there are failures on aix 
T 1469715277 18<akurtakov>	but I believe them to not be caused by build.sh change
T 1469715702 20<lufimtse>30	hmm, I see
T 1469715721 20<lufimtse>30	u think maybe it's this guy? gtk_adjustment_get_page_increment
T 1469715887 18<akurtakov>	yes
T 1469715904 20<lufimtse>30	should I update the build.sh to not use any '=='
T 1469715908 20<lufimtse>30	because there are some more further down.
T 1469715914 18<akurtakov>	hmm, where?
T 1469715922 20<lufimtse>30	at bottom
T 1469715928 20<lufimtse>30	also I could replace [[ ]] with [ ] 
T 1469715939 20<lufimtse>30	as I think the [[ ]] may potentially need newer bash
T 1469715951 18<akurtakov>	yes please
T 1469715956 20<lufimtse>30	although when replacing [[]] with [] I will need to change || to -o
T 1469715959 20<lufimtse>30	kk
T 1469715962 20<lufimtse>30	lemme work on that.
T 1469715980 18<akurtakov>	do you see now why this wasn't done
T 1469716002 18<akurtakov>	these things prevent us from delivering user visible changes (like the webkit2 port)
T 1469716029 20<lufimtse>30	X-D
T 1469716031 20<lufimtse>30	yah, 
T 1469716036 20<lufimtse>30	but we have to push for innovation
T 1469716048 20*	lufimtse 30fixing up build.sh now
T 1469716063 18<akurtakov>	yes, we have to
T 1469716089 18<akurtakov>	but we have to keep our user base big and healthy as first goal
T 1469716232 20<lufimtse>30	I see
T 1469716603 20<lufimtse>30	btw, on the side. shellED tends to hang and freeze my eclipse
T 1469716608 20<lufimtse>30	does that happen much with you?
T 1469716629 18<akurtakov>	haven't used it much lately
T 1469716637 18<akurtakov>	most used tool for me is zimbra lately :(
T 1469716882 20<lufimtse>30	he he
T 1469717678 20<lufimtse>30	How about I script it so that colors are only printed for a bash shell?
T 1469717688 20<lufimtse>30	~3 extra lines of code
T 1469717699 20<lufimtse>30	or too specific?
T 1469717733 18<akurtakov>	too specific I think
T 1469717737 20<lufimtse>30	kk
T 1469717750 18<akurtakov>	do you think it's possible this to break aix ?
T 1469717794 20<lufimtse>30	not really, just looks funny in saved log
T 1469717813 20<lufimtse>30	like prints odd characters
T 1469717816 20<lufimtse>30	but it's not a big deal
T 1469717820 20<lufimtse>30	just polish.
T 1469717839 20<lufimtse>30	the fact that the echo did print into log indicates it works
T 1469717849 20<lufimtse>30	btw
T 1469717853 20<lufimtse>30	portability patch: https://git.eclipse.org/r/#/c/78072/
T 1469717871 20<lufimtse>30	I removed advance syntax, to use only the conditional syntax already found in the script.
T 1469717881 20<lufimtse>30	[ ] and use of '-o' instead of ||
T 1469717892 20<lufimtse>30	this is POSIX standard I think
T 1469718033 20<lufimtse>30	this should hopefully make it work on other build machines
T 1469718035 20<lufimtse>30	lesson learned
T 1469719098 20<lufimtse>30	I added you as reviewer. 
T 1469731691 18<akurtakov>	how are things going with webkit btw?
T 1469731741 20<lufimtse>30	reading over GTask
T 1469731746 20<lufimtse>30	atm
T 1469731770 18<akurtakov>	promising for now ?
T 1469731801 20<lufimtse>30	you mean GTask or Webkit as a whole?
T 1469731807 18<akurtakov>	gtask
T 1469731817 18<akurtakov>	for webkit we simply have no alternative
T 1469731832 20<lufimtse>30	I'm still kinda wrapping my head around it. Did a bit of testing of the font patch this morning
T 1469731836 20<lufimtse>30	and build.sh etc... 
T 1469731844 20<lufimtse>30	Eclipse looks nice again
T 1469731850 18<akurtakov>	hah cool
T 1469731857 18<akurtakov>	so next week is milestone week
T 1469731861 18<akurtakov>	keep this in mind
T 1469731871 18<akurtakov>	and tell the others in the office
T 1469731898 20<lufimtse>30	What does that entail?
T 1469731969 18<akurtakov>	https://wiki.eclipse.org/Eclipse/Rhythm#Milestones
T 1469731995 18<akurtakov>	important part During that stabilization week, the code base is frozen from Tuesday onwards, except to fix regressions that are found during that week's testing.  
T 1469732212 20<lufimtse>30	so code freeze for a week?
T 1469732222 18<akurtakov>	yes
T 1469732225 20<lufimtse>30	meh
T 1469732227 20<lufimtse>30	ok
T 1469732242 18<akurtakov>	well, it means you can't push
T 1469732252 18<akurtakov>	not that you should not work on fixing the webkit issues :)
T 1469732259 18<akurtakov>	just don't let them in during the week
T 1469732378 20<lufimtse>30	kk
T 1469735801 20<lufimtse>30	There is g_task_run_in_thread_sync() which may be what we awant
T 1469735809 20<lufimtse>30	g_task_run_in_thread_sync
T 1469735814 20<lufimtse>30	https://developer.gnome.org/gio/stable/GTask.html#g-task-run-in-thread-sync
T 1469735823 20<lufimtse>30	Runs task_func in another thread, and waits for it to return or be cancelled. You can use g_task_propagate_pointer(), etc, afterward to get the result of task_func .
T 1469735827 20<lufimtse>30	I'll fiddle around with it.
T 1469735839 18<akurtakov>	sounds good
T 1469736756 18<akurtakov>	fyi https://bugs.eclipse.org/bugs/show_bug.cgi?id=498829
T 1469738771 20<lufimtse>30	I've become the jhbuild support guy around here
T 1469740269 20<lufimtse>30	if you have a snippet with GTask, that would be useful. 
T 1469740270 LEAVE LAGCHECK LASTLOG LIST LOAD lua LOAD load LOAD 
T 1469740280 20*	lufimtse 30reading GTask docu
T 1469740802 18<akurtakov>	I don't have any snippet around 
T 1469804941 20*	Disconnected (20Connection timed out)
T 1469815748 20<lufimtse>30	hullo
T 1469815786 18<akurtakov>	hey
T 1469815837 20<lufimtse>30	I read up through GTask, talked on IRC with GTK+ folks. They're saying that GTask is more for turning sync functions into async once. We're working to go the other way. GTK+ folks suggested regular spin lock
T 1469815845 20<lufimtse>30	meh
T 1469815857 20<lufimtse>30	GTask is somewhat complicated x_x
T 1469815889 18<akurtakov>	so be it :)
T 1469815904 18<akurtakov>	I hoped for easier way 
T 1469815909 20<lufimtse>30	me too*
T 1469815924 20<lufimtse>30	lemme prowl through glib's thread functins
T 1469819447 20<lufimtse>30	do you know if we have a minimum gtk3 version? like gtk3.4 etc.. 
T 1469819462 20<lufimtse>30	or go all the way to 3.0 
T 1469819514 18<akurtakov>	no
T 1469819520 18<akurtakov>	we have only one min requirement 
T 1469819523 18<akurtakov>	which is 2.18 now
T 1469819536 18<akurtakov>	everything above it is supported
T 1469819554 18<akurtakov>	the issue is I want to kill gtk2 first
T 1469819570 18<akurtakov>	but if let's say gtk 3.10
T 1469819594 18<akurtakov>	machines with 2.24 and 3.6 will fallback to 2.24 - defintely unwanted
T 1469819750 20<lufimtse>30	GMutex uses glib 2.32, which needs Gtk3.4
T 1469819769 20<lufimtse>30	I guess I can wrap things into version checks
T 1469819773 18<akurtakov>	yup
T 1469819786 20<lufimtse>30	webkit2 would then require a min of gtk3.4, which is reasonable 
T 1469819794 18<akurtakov>	sounds fine to me
T 1469819804 18<akurtakov>	for this year I want to bump to 2.24
T 1469819821 20<lufimtse>30	kk
T 1469819826 18<akurtakov>	next year 3.x
T 1469819831 18<akurtakov>	3.0 at least
T 1469819834 20<lufimtse>30	X-D!!
T 1469819844 18<akurtakov>	but I would push for 3.10 :)
T 1469819854 20<lufimtse>30	makes sense
T 1469820150 20<lufimtse>30	comming to think of it, I can get away without mutex on this one since there is only one writer and one reader. Neva-mind.
T 1469820164 20<lufimtse>30	a simple int will do. 
T 1469820170 20*	lufimtse 30hacking away..
T 1469820321 18<akurtakov>	:0
T 1469820341 18<akurtakov>	you went beyond my level of research
T 1470237409 20*	Disconnected (20Connection timed out)
T 1470324142 18<akurtakov>	hey Leo
T 1470324155 20<lufimtse>30	hullo
T 1470324177 18<akurtakov>	fyi
T 1470324202 18<akurtakov>	next week I'm on vacation the week after that for a meeting in westford
T 1470324215 18<akurtakov>	so next regular work day 22nd
T 1470324223 18<akurtakov>	don't bet on my my replies before that
T 1470324228 20<lufimtse>30	I will miss your dearly :'-(
T 1470324232 20<lufimtse>30	have a nice vacation
T 1470324238 20<lufimtse>30	thanks for heads up
T 1470324250 20<lufimtse>30	I'm fiddling around with adding webkitgtk_custom.*
T 1470324260 20<lufimtse>30	to make files etc.. 
T 1470324276 18<akurtakov>	enjoy :)
T 1470324284 20<lufimtse>30	X-D
T 1470334909 20<lufimtse>30	btw, suppose I have a webkitgtk commit, should I wait with those till you be back?
T 1470334916 20<lufimtse>30	ex the webkit_custom is on it's way
T 1470335082 18<akurtakov>	no
T 1470335088 18<akurtakov>	get someone else to review it
T 1470335090 18<akurtakov>	e.g. Eric
T 1470335101 18<akurtakov>	but don't do it this week (milestone)
T 1470335119 20<lufimtse>30	I see
T 1470335196 20<lufimtse>30	when is the code frozen until?
T 1470335202 20<lufimtse>30	I'm looking at: https://www.eclipse.org/eclipse/development/plans/freeze_plan_4_6_1.php
T 1470335206 20<lufimtse>30	does it say it there?
T 1470335208 18<akurtakov>	monday is normal business again
T 1470335234 20<lufimtse>30	how do I tell when code freeze occurs?
T 1470335798 18<akurtakov>	there are mails sent announcing the milestone week
